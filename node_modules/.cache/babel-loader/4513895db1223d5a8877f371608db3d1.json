{"ast":null,"code":"var _jsxFileName = \"S:\\\\final hackathon\\\\nfi3\\\\src\\\\components\\\\Repay.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport '../cssmodule/Mortage.css';\nimport Nftblock2 from './Nftblock2';\nimport '../extra/loading.css';\nimport m_initial3 from '../functions/repay';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Repay = props => {\n  _s();\n\n  // const [item,update_item]=useState([]);\n  const [item2, updatetemp] = useState([]);\n  const [loading, setloading] = useState(true);\n  const apiKey = \"qTpo5KLsQvfNVtuZx6mILiNuhNZq4lpJ\";\n  const endpoint = 'https://polygon-mumbai.g.alchemy.com/v2/qTpo5KLsQvfNVtuZx6mILiNuhNZq4lpJ';\n  const own = props.owneraddr;\n  const contractAddress = '';\n  const item = [{\n    token_id: 22035,\n    address: '0x102d7d235795744d44f862cc8d92dccc8f46112e',\n    date: '2022-8-21',\n    status: 1,\n    price: '100'\n  }, {\n    token_id: 6,\n    address: '111111111111111111',\n    date: '23-4-2002',\n    status: 0,\n    price: '1000'\n  }, {\n    token_id: 2,\n    address: '2',\n    date: '2',\n    status: 2,\n    price: '2'\n  }, {\n    token_id: 3,\n    address: '3',\n    date: '3',\n    status: 3,\n    price: '3'\n  }, {\n    token_id: 4,\n    address: '4',\n    date: '4',\n    status: 4,\n    price: '4'\n  }];\n  useEffect(async () => {// const headers = {\n    //     'Content-Type': 'application/json',            \n    //   };      \n    //   const result = await axios.post(\n    //     'http://localhost:3001/student/fetch',\n    //     { },\n    //     { headers: headers, }\n    //   );\n    //   console.log(result.data.result);\n    //   update_item(result.data.result);\n  }, []);\n  useEffect(async () => {\n    if (props.owneraddr != undefined) {\n      const testnetNFTs = await fetch(`${endpoint}/getNFTs?owner=${own}`).then(data => data.json());\n      fetchdata(testnetNFTs.ownedNfts);\n    }\n  }, [props.owneraddr]);\n\n  const fetchdata = async arr => {\n    for (let j = 0; j < arr.length; j++) {\n      let temp = arr[j].media[0].gateway;\n      var con_add = arr[j].contract.address;\n      var con_token_id = parseInt(arr[j].id.tokenId, 16);\n      var price = Math.pow(10, -18);\n      const options = {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json'\n        }\n      };\n      await fetch(\"https://api.covalenthq.com/v1/80001/tokens/\" + con_add + \"/nft_transactions/\" + con_token_id + \"/?quote-currency=USD&format=JSON&key=ckey_ed1c2bdcdfee41bd9fbf5422ada\", options).then(response => response.json()).then(response => {\n        let arr_size = response.data.items[0].nft_transactions.length;\n        var temp1 = parseInt(response.data.items[0].nft_transactions[arr_size - 1].value);\n        price *= temp1;\n      }).catch(err => console.error(err));\n      updatetemp(data => [...data, {\n        src: temp,\n        heading: arr[j].title,\n        para: price,\n        address: con_add,\n        token: con_token_id,\n        des: arr[j].description\n      }]);\n    }\n\n    setloading(false);\n  };\n\n  const items2 = item2.map(data => {\n    for (var i = 0; i < item.length; i++) {\n      if (data.address == item[i].address && parseInt(data.token) == item[i].token_id) {\n        window.setInterval(function () {// m_initial3( {\n          //     address:data.address,\n          //     token_id:data.token_id,\n          //     owner:data.owneraddr,\n          //     price:data.para,\n          // });\n          //this is the function responsible for auto call\n        }, 30000);\n        return /*#__PURE__*/_jsxDEV(Nftblock2, {\n          src: data.src,\n          address: data.address,\n          des: data.des,\n          token: data.token,\n          heading: data.heading,\n          para: data.para,\n          changepopup: props.changepopupstate,\n          popupv: props.popupv,\n          owner: props.owneraddr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 28\n        }, this);\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: \"0\",\n      padding: \"0px\"\n    },\n    children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ring\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 22\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mortage wrapper\",\n      children: [items2, /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"summa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"summa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"summa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"summa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Repay, \"KqI+bKGmkPAdkGlNbWUaF1oJS3k=\");\n\n_c = Repay;\nexport default Repay;\n\nvar _c;\n\n$RefreshReg$(_c, \"Repay\");","map":{"version":3,"sources":["S:/final hackathon/nfi3/src/components/Repay.js"],"names":["React","useEffect","useState","axios","Nftblock2","m_initial3","Repay","props","item2","updatetemp","loading","setloading","apiKey","endpoint","own","owneraddr","contractAddress","item","token_id","address","date","status","price","undefined","testnetNFTs","fetch","then","data","json","fetchdata","ownedNfts","arr","j","length","temp","media","gateway","con_add","contract","con_token_id","parseInt","id","tokenId","Math","pow","options","method","headers","Accept","response","arr_size","items","nft_transactions","temp1","value","catch","err","console","error","src","heading","title","para","token","des","description","items2","map","i","window","setInterval","changepopupstate","popupv","margin","padding"],"mappings":"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","sourcesContent":["import {React, useEffect, useState} from 'react';\r\n\r\nimport axios from 'axios';\r\nimport '../cssmodule/Mortage.css';\r\nimport Nftblock2 from './Nftblock2';\r\nimport '../extra/loading.css';\r\nimport m_initial3 from '../functions/repay';\r\n\r\n\r\nconst Repay=(props)=>{\r\n\r\n\r\n    \r\n\r\n\r\n\r\n    // const [item,update_item]=useState([]);\r\n    const [item2,updatetemp]=useState([]);\r\n    const [loading,setloading]=useState(true);  \r\n\r\n    const apiKey = \"qTpo5KLsQvfNVtuZx6mILiNuhNZq4lpJ\";\r\n    const endpoint = 'https://polygon-mumbai.g.alchemy.com/v2/qTpo5KLsQvfNVtuZx6mILiNuhNZq4lpJ';\r\n    const own=props.owneraddr;\r\n    const contractAddress='';\r\n\r\n     const item=[\r\n\r\n        {token_id: 22035, address: '0x102d7d235795744d44f862cc8d92dccc8f46112e', date: '2022-8-21', status: 1, price: '100'},\r\n {token_id: 6, address: '111111111111111111', date: '23-4-2002', status: 0, price: '1000'}, {token_id: 2, address: '2', date: '2', status: 2, price: '2'},\r\n {token_id: 3, address: '3', date: '3', status: 3, price: '3'},\r\n {token_id: 4, address: '4', date: '4', status: 4, price: '4'},\r\n\r\n\r\n    ];\r\n\r\n\r\n    useEffect(async()=>{\r\n\r\n        // const headers = {\r\n        //     'Content-Type': 'application/json',            \r\n        //   };      \r\n        //   const result = await axios.post(\r\n        //     'http://localhost:3001/student/fetch',\r\n        //     { },\r\n        //     { headers: headers, }\r\n        //   );\r\n       \r\n        //   console.log(result.data.result);\r\n        //   update_item(result.data.result);\r\n    },[]);\r\n\r\n\r\n    useEffect( async() => {\r\n\r\n        if(props.owneraddr != undefined){     \r\n          const  testnetNFTs= await fetch(`${endpoint}/getNFTs?owner=${own}`).then(data => data.json());        \r\n           \r\n            fetchdata(testnetNFTs.ownedNfts);\r\n      }\r\n\r\n    },[props.owneraddr]);\r\n\r\n\r\n\r\n\r\n\r\n    const fetchdata=async(arr)=>{\r\n\r\n    for(let j=0; j<arr.length ;j++){            \r\n        let temp=arr[j].media[0].gateway;\r\n\r\n        var con_add=arr[j].contract.address;\r\n        var con_token_id=parseInt(arr[j].id.tokenId,16);\r\n        var price=Math.pow(10,-18);\r\n\r\n        const options = {method: 'GET', headers: {Accept: 'application/json'}};\r\n        await fetch(\"https://api.covalenthq.com/v1/80001/tokens/\"+con_add+\"/nft_transactions/\"+con_token_id+\"/?quote-currency=USD&format=JSON&key=ckey_ed1c2bdcdfee41bd9fbf5422ada\",options)\r\n        .then(response => response.json())\r\n        .then(response =>{ \r\n            let arr_size=response.data.items[0].nft_transactions.length;\r\n            var temp1=parseInt(response.data.items[0].nft_transactions[arr_size-1].value);\r\n            price*=temp1;\r\n            })\r\n        .catch(err => console.error(err));        \r\n    \r\n\r\n        updatetemp(data=>[...data,{ src:temp,\r\n            heading:arr[j].title,\r\n            para:price,\r\n            address:con_add,\r\n            token:con_token_id,\r\n            des:arr[j].description\r\n        }\r\n]);    \r\n\r\n    }\r\n\r\n    setloading(false);  \r\n   \r\n}\r\n\r\n\r\n    \r\n\r\n        const items2=item2.map((data)=>{\r\n\r\n            for (var i=0;i<item.length;i++){\r\n\r\n                \r\n    \r\n                \r\n                if (data.address==item[i].address && parseInt(data.token)==item[i].token_id){\r\n\r\n                    window.setInterval(function(){ \r\n            \r\n                        // m_initial3( {\r\n                        //     address:data.address,\r\n                        //     token_id:data.token_id,\r\n                        //     owner:data.owneraddr,\r\n                        //     price:data.para,\r\n                        // });\r\n\r\n                        //this is the function responsible for auto call\r\n                      \r\n                  }, 30000); \r\n                \r\n                    return <Nftblock2  src={data.src} address={data.address} des={data.des} token={data.token}  heading={data.heading} para={data.para} changepopup={props.changepopupstate} popupv={props.popupv} owner={props.owneraddr}></Nftblock2>;\r\n                }\r\n    \r\n            }\r\n            \r\n        })\r\n\r\n\r\n        \r\n\r\n\r\n    \r\n\r\n    \r\n\r\n\r\n\r\n    return (\r\n        <div style={{margin:\"0\" ,padding:\"0px\"}}>\r\n        \r\n        {\r\n            loading?(<div className='loading-center'>\r\n                \r\n                        <div className=\"ring\"></div>\r\n                \r\n                </div>):(\r\n                <div className='mortage wrapper'>\r\n                     {items2}\r\n                    <p className='summa'></p> \r\n                    <p className='summa'></p> \r\n                    <p className='summa'></p> \r\n                    <p className='summa'></p>\r\n                </div>\r\n            )\r\n        }\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Repay;"]},"metadata":{},"sourceType":"module"}