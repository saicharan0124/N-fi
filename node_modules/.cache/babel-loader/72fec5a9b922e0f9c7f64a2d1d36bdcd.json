{"ast":null,"code":"\"use strict\";\n\nvar _RESTController = _interopRequireDefault(require(\"./RESTController\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      return groups[name] = result[g[name]], groups;\n    }, Object.create(null));\n  }\n\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    return result && (result.groups = buildGroups(result, this)), result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        return \"$\" + groups[name];\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nconst DEEP_INDEX_API_HOST = 'deep-index.moralis.io';\nconst DEEP_INDEX_SWAGGER_PATH = '/api-docs/v2/swagger.json';\nconst TrackingEventName = Object.freeze({\n  START_FUNCTION: 'Moralis SDK start'\n});\n\nconst fetchSwaggerJson = async () => {\n  const {\n    response\n  } = await _RESTController.default.ajax('GET', `https://${DEEP_INDEX_API_HOST}${DEEP_INDEX_SWAGGER_PATH}`);\n  return response;\n};\n\nconst getPathByTag = swaggerJSON => {\n  const pathByTag = {};\n  const pathDetails = {};\n  Object.entries(swaggerJSON.paths).map(_ref => {\n    let [pathName, requestData] = _ref;\n    return Object.entries(requestData).forEach(_ref2 => {\n      let [method, data] = _ref2;\n      const {\n        tags\n      } = data;\n\n      if (tags.length > 0) {\n        if (!pathByTag[tags[0]]) {\n          pathByTag[tags[0]] = [];\n        }\n\n        pathByTag[tags[0]].push(data.operationId);\n        pathDetails[data.operationId] = {\n          method,\n          pathName,\n          data\n        };\n      }\n    });\n  });\n  return {\n    pathByTag,\n    pathDetails\n  };\n};\n\nconst fetchEndpoints = async () => {\n  const swaggerJSON = await fetchSwaggerJson();\n  const {\n    pathDetails\n  } = await getPathByTag(swaggerJSON);\n  const data = [];\n  Object.keys(pathDetails).forEach(x => {\n    const item = pathDetails[x];\n    const endpoint = {\n      method: item.method.toUpperCase(),\n      group: item.data.tags[0],\n      name: x,\n      url: item.pathName.split('{').join(':').split('}').join('')\n    };\n    data.push(endpoint);\n  });\n  return data;\n};\n/**\n * Compares if the semantic version of version1 is larger than version2\n */\n\n\nconst isSemanticVersionLarger = (version1, version2) => {\n  const [version1Main, version1Pre] = version1.split('-');\n  const version1Arr = version1Main.split('.').map(s => Number(s));\n  const [version2Main, version2Pre] = version2.split('-');\n  const version2Arr = version2Main.split('.').map(s => Number(s));\n\n  for (let index = 0; index < 3; index++) {\n    const compare1 = version1Arr[index];\n    const compare2 = version2Arr[index];\n    if (compare1 > compare2) return true;\n    if (compare1 < compare2) return false;\n    if (!Number.isNaN(compare1) && Number.isNaN(compare2)) return true;\n    if (Number.isNaN(compare1) && !Number.isNaN(compare2)) return false;\n  } // Compare pre-releasees if main versions are the same\n\n\n  if (version1Pre && version2Pre) {\n    var _version1Pre$split$, _version2Pre$split$;\n\n    const version1PreNumber = (_version1Pre$split$ = version1Pre.split('.')[1]) !== null && _version1Pre$split$ !== void 0 ? _version1Pre$split$ : 0;\n    const version2PreNumber = (_version2Pre$split$ = version2Pre.split('.')[1]) !== null && _version2Pre$split$ !== void 0 ? _version2Pre$split$ : 0;\n    return version1PreNumber > version2PreNumber;\n  } // If version2 is a pre-release and version1 is not, then version 1 is newer\n\n\n  if (version2Pre) {\n    return true;\n  }\n\n  return false;\n};\n\nconst checkForSdkUpdates = async () => {\n  try {\n    const {\n      response\n    } = await _RESTController.default.ajax('GET', 'https://www.unpkg.com/moralis/package.json');\n    const latestVersion = response.version;\n    if (isSemanticVersionLarger(latestVersion, \"1.7.0\")) // eslint-disable-next-line no-console\n      console.warn(`Moralis: You are not using the latest version of the SDK. Please update it as soon as possible to enjoy the newest features. Most recent version: ${latestVersion}`);\n  } catch (error) {// Cannot verify version, might be network error etc. We don't bother showing anything in that case\n  }\n};\n\nconst trackEvent = async (name, subdomain, options) => {\n  try {\n    const {\n      response\n    } = await _RESTController.default.ajax('POST', 'https://internal-api.moralis.io/api/functions/trackEvent', JSON.stringify({\n      subdomain,\n      event: name,\n      options\n    }), {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    });\n    return response.result;\n  } catch (error) {//\n  }\n};\n/**\n * Regex to validate serverUrl, for example: https://xxxxxxxxxxxx.yyyyyyyyyy.zzzzzz:1234/server\n * It's very generous and doesn't assume the value of domain, subdomain and port, it only checks if we can extract\n * a subddomain\n */\n\n\nconst validServerUrlRegex = /*#__PURE__*/_wrapRegExp(/^https?:\\/\\/([0-9A-Z_a-z]+\\.[0-9A-Z_a-z]+\\.[0-9A-Z_a-z]+)(:[0-9]{4})?\\/server\\/?$/, {\n  subdomain: 1\n});\n\nconst validateServerUrl = serverUrl => {\n  return validServerUrlRegex.test(serverUrl);\n};\n\nconst getSubdomain = serverUrl => {\n  var _match$groups$subdoma, _match$groups;\n\n  const isValidServerUrl = validateServerUrl(serverUrl);\n\n  if (!isValidServerUrl) {\n    return null;\n  }\n\n  const match = validServerUrlRegex.exec(serverUrl);\n  return (_match$groups$subdoma = match === null || match === void 0 ? void 0 : (_match$groups = match.groups) === null || _match$groups === void 0 ? void 0 : _match$groups.subdomain) !== null && _match$groups$subdoma !== void 0 ? _match$groups$subdoma : null;\n};\n\nmodule.exports = {\n  fetchSwaggerJson,\n  getPathByTag,\n  fetchEndpoints,\n  checkForSdkUpdates,\n  trackEvent,\n  TrackingEventName,\n  getSubdomain\n};","map":{"version":3,"sources":["S:/final hackathon/nfi3/node_modules/moralis/lib/node/utils.js"],"names":["_RESTController","_interopRequireDefault","require","obj","__esModule","default","_wrapRegExp","re","groups","BabelRegExp","_super","RegExp","prototype","_groups","WeakMap","flags","_this","set","get","_setPrototypeOf","buildGroups","result","g","Object","keys","reduce","name","create","_inherits","exec","str","call","Symbol","replace","substitution","_","args","arguments","length","slice","push","apply","subClass","superClass","TypeError","constructor","value","writable","configurable","defineProperty","o","p","setPrototypeOf","__proto__","DEEP_INDEX_API_HOST","DEEP_INDEX_SWAGGER_PATH","TrackingEventName","freeze","START_FUNCTION","fetchSwaggerJson","response","ajax","getPathByTag","swaggerJSON","pathByTag","pathDetails","entries","paths","map","pathName","requestData","forEach","method","data","tags","operationId","fetchEndpoints","x","item","endpoint","toUpperCase","group","url","split","join","isSemanticVersionLarger","version1","version2","version1Main","version1Pre","version1Arr","s","Number","version2Main","version2Pre","version2Arr","index","compare1","compare2","isNaN","_version1Pre$split$","_version2Pre$split$","version1PreNumber","version2PreNumber","checkForSdkUpdates","latestVersion","version","console","warn","error","trackEvent","subdomain","options","JSON","stringify","event","Accept","validServerUrlRegex","validateServerUrl","serverUrl","test","getSubdomain","_match$groups$subdoma","_match$groups","isValidServerUrl","match","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _RESTController = _interopRequireDefault(require(\"./RESTController\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      return groups[name] = result[g[name]], groups;\n    }, Object.create(null));\n  }\n\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    return result && (result.groups = buildGroups(result, this)), result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        return \"$\" + groups[name];\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nconst DEEP_INDEX_API_HOST = 'deep-index.moralis.io';\nconst DEEP_INDEX_SWAGGER_PATH = '/api-docs/v2/swagger.json';\nconst TrackingEventName = Object.freeze({\n  START_FUNCTION: 'Moralis SDK start'\n});\n\nconst fetchSwaggerJson = async () => {\n  const {\n    response\n  } = await _RESTController.default.ajax('GET', `https://${DEEP_INDEX_API_HOST}${DEEP_INDEX_SWAGGER_PATH}`);\n  return response;\n};\n\nconst getPathByTag = swaggerJSON => {\n  const pathByTag = {};\n  const pathDetails = {};\n  Object.entries(swaggerJSON.paths).map(([pathName, requestData]) => {\n    return Object.entries(requestData).forEach(([method, data]) => {\n      const {\n        tags\n      } = data;\n\n      if (tags.length > 0) {\n        if (!pathByTag[tags[0]]) {\n          pathByTag[tags[0]] = [];\n        }\n\n        pathByTag[tags[0]].push(data.operationId);\n        pathDetails[data.operationId] = {\n          method,\n          pathName,\n          data\n        };\n      }\n    });\n  });\n  return {\n    pathByTag,\n    pathDetails\n  };\n};\n\nconst fetchEndpoints = async () => {\n  const swaggerJSON = await fetchSwaggerJson();\n  const {\n    pathDetails\n  } = await getPathByTag(swaggerJSON);\n  const data = [];\n  Object.keys(pathDetails).forEach(x => {\n    const item = pathDetails[x];\n    const endpoint = {\n      method: item.method.toUpperCase(),\n      group: item.data.tags[0],\n      name: x,\n      url: item.pathName.split('{').join(':').split('}').join('')\n    };\n    data.push(endpoint);\n  });\n  return data;\n};\n/**\n * Compares if the semantic version of version1 is larger than version2\n */\n\n\nconst isSemanticVersionLarger = (version1, version2) => {\n  const [version1Main, version1Pre] = version1.split('-');\n  const version1Arr = version1Main.split('.').map(s => Number(s));\n  const [version2Main, version2Pre] = version2.split('-');\n  const version2Arr = version2Main.split('.').map(s => Number(s));\n\n  for (let index = 0; index < 3; index++) {\n    const compare1 = version1Arr[index];\n    const compare2 = version2Arr[index];\n    if (compare1 > compare2) return true;\n    if (compare1 < compare2) return false;\n    if (!Number.isNaN(compare1) && Number.isNaN(compare2)) return true;\n    if (Number.isNaN(compare1) && !Number.isNaN(compare2)) return false;\n  } // Compare pre-releasees if main versions are the same\n\n\n  if (version1Pre && version2Pre) {\n    var _version1Pre$split$, _version2Pre$split$;\n\n    const version1PreNumber = (_version1Pre$split$ = version1Pre.split('.')[1]) !== null && _version1Pre$split$ !== void 0 ? _version1Pre$split$ : 0;\n    const version2PreNumber = (_version2Pre$split$ = version2Pre.split('.')[1]) !== null && _version2Pre$split$ !== void 0 ? _version2Pre$split$ : 0;\n    return version1PreNumber > version2PreNumber;\n  } // If version2 is a pre-release and version1 is not, then version 1 is newer\n\n\n  if (version2Pre) {\n    return true;\n  }\n\n  return false;\n};\n\nconst checkForSdkUpdates = async () => {\n  try {\n    const {\n      response\n    } = await _RESTController.default.ajax('GET', 'https://www.unpkg.com/moralis/package.json');\n    const latestVersion = response.version;\n    if (isSemanticVersionLarger(latestVersion, \"1.7.0\")) // eslint-disable-next-line no-console\n      console.warn(`Moralis: You are not using the latest version of the SDK. Please update it as soon as possible to enjoy the newest features. Most recent version: ${latestVersion}`);\n  } catch (error) {// Cannot verify version, might be network error etc. We don't bother showing anything in that case\n  }\n};\n\nconst trackEvent = async (name, subdomain, options) => {\n  try {\n    const {\n      response\n    } = await _RESTController.default.ajax('POST', 'https://internal-api.moralis.io/api/functions/trackEvent', JSON.stringify({\n      subdomain,\n      event: name,\n      options\n    }), {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    });\n    return response.result;\n  } catch (error) {//\n  }\n};\n/**\n * Regex to validate serverUrl, for example: https://xxxxxxxxxxxx.yyyyyyyyyy.zzzzzz:1234/server\n * It's very generous and doesn't assume the value of domain, subdomain and port, it only checks if we can extract\n * a subddomain\n */\n\n\nconst validServerUrlRegex = /*#__PURE__*/_wrapRegExp(/^https?:\\/\\/([0-9A-Z_a-z]+\\.[0-9A-Z_a-z]+\\.[0-9A-Z_a-z]+)(:[0-9]{4})?\\/server\\/?$/, {\n  subdomain: 1\n});\n\nconst validateServerUrl = serverUrl => {\n  return validServerUrlRegex.test(serverUrl);\n};\n\nconst getSubdomain = serverUrl => {\n  var _match$groups$subdoma, _match$groups;\n\n  const isValidServerUrl = validateServerUrl(serverUrl);\n\n  if (!isValidServerUrl) {\n    return null;\n  }\n\n  const match = validServerUrlRegex.exec(serverUrl);\n  return (_match$groups$subdoma = match === null || match === void 0 ? void 0 : (_match$groups = match.groups) === null || _match$groups === void 0 ? void 0 : _match$groups.subdomain) !== null && _match$groups$subdoma !== void 0 ? _match$groups$subdoma : null;\n};\n\nmodule.exports = {\n  fetchSwaggerJson,\n  getPathByTag,\n  fetchEndpoints,\n  checkForSdkUpdates,\n  trackEvent,\n  TrackingEventName,\n  getSubdomain\n};"]},"metadata":{},"sourceType":"script"}