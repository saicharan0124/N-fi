{"ast":null,"code":"var _jsxFileName = \"S:\\\\final hackathon\\\\nfi3\\\\src\\\\components\\\\Lendpool.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState } from 'react';\nimport '../cssmodule/Lendpool.css';\nimport Lendblock from './Lendblock';\nimport axios from 'axios';\nimport lendpool from '../functions/lendpool';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Lendpool = props => {\n  _s();\n\n  const owner = localStorage.getItem('owner');\n  const [amount_value, update_amount_value] = useState(0);\n  const [date, update_date] = useState('');\n  const [item, update_item] = useState([]);\n  const [total_supply, update_total_supply] = useState(0);\n  const [your_supply_balance, update_your_supply_balance] = useState(0);\n  useEffect(async () => {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    const result = await axios.post('http://localhost:3001/lendpool/fetch/getbyaddress', {\n      address: owner\n    }, {\n      headers: headers\n    });\n    const result1 = await axios.post('http://localhost:3001/lendpool/fetch', {}, {\n      headers: headers\n    }); //console.log(result.data);\n\n    if (result.data.result != undefined) {\n      update_item(result.data.result);\n      update_total_supply(result1.data.result.length);\n      var sum = 0;\n\n      for (var i = 0; i < result.data.result.length; i++) {\n        sum += parseInt(result.data.result[i].price);\n      }\n\n      update_your_supply_balance(sum);\n    }\n  }, []);\n\n  const formsubmit = async event => {\n    event.preventDefault(); //console.log(amount_value);\n\n    const lend = lendpool(amount_value, date);\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    var start = new Date(lend.start);\n    var end = new Date(lend.end);\n    const result = await axios.post('http://localhost:3001/lendpool/add', {\n      \"lendid\": lend.id,\n      \"address\": \"\" + props.owneraddr,\n      \"start_date\": start,\n      \"end_date\": end,\n      \"price\": amount_value,\n      \"status\": 0\n    }, {\n      headers: headers\n    });\n    window.location.reload();\n  };\n\n  const items = item.map(data => {\n    return /*#__PURE__*/_jsxDEV(Lendblock, {\n      data: data,\n      changepopup: props.changepopupstate,\n      popupv: props.popupv,\n      addres: owner\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lendpool-outer\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lendpool-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lendpool-detail-inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Total supply:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: total_supply\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lendpool-detail-inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Your Supply Balance:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: your_supply_balance\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lendform\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Amount:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: 'text',\n          value: amount_value,\n          name: amount_value,\n          onChange: event => {\n            update_amount_value(event.target.value);\n          },\n          placeholder: 'enter the amount'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Days:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: 'number',\n          value: date,\n          name: date,\n          onChange: event => {\n            update_date(event.target.value);\n          },\n          placeholder: 'enter the date'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: 'submit',\n          value: 'lend',\n          onClick: event => {\n            formsubmit(event);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this), items]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Lendpool, \"VCe1uujuFXLRC4vVz/13dFrkp+0=\");\n\n_c = Lendpool;\nexport default Lendpool;\n\nvar _c;\n\n$RefreshReg$(_c, \"Lendpool\");","map":{"version":3,"sources":["S:/final hackathon/nfi3/src/components/Lendpool.js"],"names":["React","useEffect","useState","Lendblock","axios","lendpool","Lendpool","props","owner","localStorage","getItem","amount_value","update_amount_value","date","update_date","item","update_item","total_supply","update_total_supply","your_supply_balance","update_your_supply_balance","headers","result","post","address","result1","data","undefined","length","sum","i","parseInt","price","formsubmit","event","preventDefault","lend","start","Date","end","id","owneraddr","window","location","reload","items","map","changepopupstate","popupv","target","value"],"mappings":"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","sourcesContent":["import {React, useEffect,useState } from 'react';\r\n\r\n\r\n\r\nimport '../cssmodule/Lendpool.css';\r\nimport Lendblock from './Lendblock';\r\nimport axios from 'axios';\r\n\r\nimport lendpool from '../functions/lendpool';\r\n\r\n\r\nconst Lendpool=(props)=>{\r\n\r\n\r\n  const owner=localStorage.getItem('owner');\r\n\r\n    const [amount_value,update_amount_value]=useState(0);\r\n    const [date,update_date]=useState('');\r\n    const [item,update_item]=useState([]);\r\n    const [total_supply,update_total_supply]=useState(0);\r\n    \r\n    const [your_supply_balance,update_your_supply_balance]=useState(0);\r\n\r\n\r\n   \r\n\r\n\r\n   useEffect(async()=>{\r\n\r\n    \r\n\r\n    \r\n\r\n    const headers = {\r\n        'Content-Type':'application/json',      \r\n      };\r\n      \r\n      const result = await axios.post(\r\n        'http://localhost:3001/lendpool/fetch/getbyaddress',\r\n        {   address:owner          \r\n        },\r\n        {\r\n          headers: headers,\r\n        }\r\n      );\r\n\r\n      const result1 = await axios.post(\r\n        'http://localhost:3001/lendpool/fetch',\r\n        {        \r\n        },\r\n        {\r\n          headers: headers,\r\n        }\r\n      );\r\n\r\n      //console.log(result.data);\r\n\r\n      if(result.data.result!=undefined){\r\n\r\n\r\n      \r\n\r\n        update_item(result.data.result);\r\n\r\n        update_total_supply(result1.data.result.length);\r\n        \r\n        \r\n\r\n        var sum=0;\r\n\r\n        for(var i=0;i<result.data.result.length;i++){\r\n\r\n            sum+=parseInt(result.data.result[i].price);\r\n            \r\n\r\n        }\r\n\r\n\r\n        update_your_supply_balance(sum);\r\n\r\n      }\r\n      \r\n      \r\n\r\n   },[]);\r\n    \r\n    \r\n    \r\n\r\n\r\n    const formsubmit=async(event)=>{\r\n\r\n        event.preventDefault();\r\n        //console.log(amount_value);\r\n\r\n\r\n        const lend=lendpool(amount_value,date);\r\n\r\n        const headers = {\r\n            'Content-Type': 'application/json',      \r\n          };\r\n          \r\n          var start=new Date(lend.start);\r\n          var end=new Date(lend.end);\r\n\r\n          const result = await axios.post(\r\n            'http://localhost:3001/lendpool/add',\r\n            {\r\n    \r\n                \"lendid\":lend.id,\r\n                \"address\":\"\"+props.owneraddr,\r\n                \"start_date\":start,\r\n                \"end_date\":end,\r\n                \"price\":amount_value,\r\n                \"status\":0  \r\n               \r\n            },\r\n            {\r\n              headers: headers,\r\n            }\r\n          );\r\n\r\n          window.location.reload();\r\n    \r\n\r\n    }\r\n\r\n\r\n    const items=item.map((data)=>{\r\n        return  <Lendblock data={data}  changepopup={props.changepopupstate} popupv={props.popupv} addres={owner}></Lendblock>\r\n    });\r\n\r\n\r\n    \r\n\r\n    return (\r\n\r\n        <div className='lendpool-outer'>\r\n\r\n<div className='lendpool-detail'>\r\n\r\n<div className='lendpool-detail-inner'>\r\n\r\n    <h1>Total supply:</h1>\r\n    <p>{total_supply}</p>\r\n\r\n</div>\r\n\r\n<div className='lendpool-detail-inner'>\r\n\r\n    <h1>Your Supply Balance:</h1>\r\n    <p>{your_supply_balance}</p>\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n</div>\r\n\r\n            <div className='lendform'>\r\n\r\n\r\n                \r\n\r\n                <form>\r\n\r\n                    <label>Amount:</label>\r\n\r\n                    <input type={'text'}  value={amount_value}  name={amount_value} onChange={(event)=>{\r\n                        update_amount_value(event.target.value);\r\n                    }} placeholder={'enter the amount'}></input>\r\n\r\n                    <label>Days:</label> \r\n\r\n                    <input type={'number'}  value={date}  name={date} onChange={(event)=>{\r\n                        update_date(event.target.value);\r\n                    }} placeholder={'enter the date'}></input>\r\n\r\n\r\n                    <input type={'submit'} value={'lend'} onClick={(event)=>{formsubmit(event)}}></input>\r\n                </form>\r\n\r\n            </div>\r\n\r\n            {items}\r\n\r\n\r\n\r\n        </div>\r\n\r\n    );\r\n\r\n\r\n}\r\n\r\n\r\nexport default Lendpool;"]},"metadata":{},"sourceType":"module"}